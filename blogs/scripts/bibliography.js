window.addEventListener("load",function(){const bib_index={};const bib=document.querySelector(".bibliography");const citation_blocks=document.querySelectorAll(".cite");for(const b of citation_blocks){const content=b.innerHTML;if(bib_index[content]==null){bib_index[content]=Object.keys(bib_index).length+1;}
const cite_id=`cite-${bib_index[content]}`;if(bib!=null){const li=document.createElement("li");li.innerHTML=bib_index[content]+". "+content;li.id=cite_id;bib.appendChild(li);}
const link_node=document.createElement("a");link_node.classList.add("cite");link_node.innerHTML=bib_index[content];link_node.href=`#${cite_id}`;b.replaceWith(link_node);}});