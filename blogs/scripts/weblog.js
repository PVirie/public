(function(){const find_between=function(str,start){const start_pos=str.indexOf(start);if(start_pos==-1)return null;return str.slice(start_pos+start.length);};window.addEventListener("load",function(){const body=document.querySelector("body");const rating_bar=document.createElement("div");rating_bar.classList.add("bar","left","tertiary","rating","silver-lining-top");observer.observe(rating_bar);const rate_button=document.createElement("div");rate_button.classList.add("item");const rate_label=document.createElement("span");rate_label.innerText="Rate this work";const rate_up=document.createElement("span");rate_up.classList.add("material-symbols-outlined","activatable");rate_up.innerText="thumb_up";rate_up.addEventListener("click",function(){const rating=window.localStorage.getItem(`rating-${window.location.pathname}`);let total_score=1;if(rating!=null){total_score=parseInt(rating);if(!isNaN(total_score)){total_score=total_score+1;}else{total_score=1;}
if(total_score>5){alert("Thank you! you really like this work!");total_score=5;added_score=0;}}
window.localStorage.setItem(`rating-${window.location.pathname}`,JSON.stringify(total_score));data={added_score:1,source:window.location.pathname,};});rate_button.appendChild(rate_label);rate_button.appendChild(rate_up);rating_bar.appendChild(rate_button);const donate_button=document.createElement("a");donate_button.classList.add("item");const donate_label=document.createElement("span");donate_label.innerText="Pay to support this work";const donate_logo=document.createElement("span");donate_logo.classList.add("material-symbols-outlined");donate_logo.innerText="finance_chip";donate_button.appendChild(donate_label);donate_button.appendChild(donate_logo);for(const h1 of document.querySelectorAll("h1")){const title=find_between(h1.innerHTML,"âˆ« ");if(title==null)continue;donate_button.href=`https://pvirie.com/pages/catalog/main.html?search_start=${title}`;}
rating_bar.appendChild(donate_button);body.appendChild(rating_bar);});})();